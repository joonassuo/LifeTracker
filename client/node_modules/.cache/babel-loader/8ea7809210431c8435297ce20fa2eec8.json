{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Joonas\\\\lifetracker\\\\client\\\\src\\\\components\\\\Login.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { updateId } from \"../actions\";\nimport \"./Login.css\";\n\nconst Login = () => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [usersArray, setUsersArray] = useState([]);\n  const [success, setSuccess] = useState(false);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    axios.get(\"http://localhost:5000/users\").then(res => {\n      setUsersArray(res.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  });\n\n  const onLogin = e => {\n    e.preventDefault();\n    let msg = document.getElementById(\"error-message-l\");\n    let usrnm = document.getElementById(\"username\");\n    let pswrd = document.getElementById(\"password\");\n    const user = usersArray.find(user => user.username === username);\n\n    if (!user) {\n      usrnm.value = \"\";\n      pswrd.value = \"\";\n      msg.innerHTML = \"Wrong username or password\";\n    } else {\n      if (password === user.password) {\n        dispatch(updateId(user._id));\n        setSuccess(true);\n      } else {\n        pswrd.value = \"\";\n        usrnm.value = \"\";\n        msg.innerHTML = \"Wrong username or password\";\n      }\n    }\n  };\n\n  const onChangeUsername = e => {\n    e.preventDefault();\n    setUsername(e.target.value);\n  };\n\n  const onChangePassword = e => {\n    e.preventDefault();\n    setPassword(e.target.value);\n  };\n\n  return success ? React.createElement(Redirect, {\n    to: \"/home\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"login-screen\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"grid-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"logo-container fullwidth\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"/logo.png\",\n    alt: \"\",\n    id: \"logo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"username-container fullwidth\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    id: \"username\",\n    type: \"text\",\n    placeholder: \"Username\",\n    onChange: onChangeUsername,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"password-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    id: \"password\",\n    type: \"password\",\n    placeholder: \"Password\",\n    onChange: onChangePassword,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    id: \"error-message-l\",\n    className: \"grid-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"login-button-container fullwidth\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/home\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    id: \"login-button\",\n    onClick: onLogin,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"LOGIN\"))), React.createElement(\"div\", {\n    className: \"text-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/signup\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Don 't have an account?\")))));\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/Joonas/lifetracker/client/src/components/Login.js"],"names":["React","useState","useEffect","useDispatch","Link","Redirect","axios","updateId","Login","username","setUsername","password","setPassword","usersArray","setUsersArray","success","setSuccess","dispatch","get","then","res","data","catch","error","console","log","onLogin","e","preventDefault","msg","document","getElementById","usrnm","pswrd","user","find","value","innerHTML","_id","onChangeUsername","target","onChangePassword"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { updateId } from \"../actions\";\r\nimport \"./Login.css\";\r\n\r\nconst Login = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [usersArray, setUsersArray] = useState([]);\r\n  const [success, setSuccess] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"http://localhost:5000/users\")\r\n      .then(res => {\r\n        setUsersArray(res.data);\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n  });\r\n\r\n  const onLogin = e => {\r\n    e.preventDefault();\r\n    let msg = document.getElementById(\"error-message-l\");\r\n    let usrnm = document.getElementById(\"username\");\r\n    let pswrd = document.getElementById(\"password\");\r\n    const user = usersArray.find(user => user.username === username);\r\n    if (!user) {\r\n      usrnm.value = \"\";\r\n      pswrd.value = \"\";\r\n      msg.innerHTML = \"Wrong username or password\";\r\n    } else {\r\n      if (password === user.password) {\r\n        dispatch(updateId(user._id));\r\n        setSuccess(true);\r\n      } else {\r\n        pswrd.value = \"\";\r\n        usrnm.value = \"\";\r\n        msg.innerHTML = \"Wrong username or password\";\r\n      }\r\n    }\r\n  };\r\n\r\n  const onChangeUsername = e => {\r\n    e.preventDefault();\r\n    setUsername(e.target.value);\r\n  };\r\n\r\n  const onChangePassword = e => {\r\n    e.preventDefault();\r\n    setPassword(e.target.value);\r\n  };\r\n\r\n  return success ? (\r\n    <Redirect to=\"/home\" />\r\n  ) : (\r\n    <div>\r\n      <div className=\"login-screen\">\r\n        <div className=\"grid-container\">\r\n          <div className=\"logo-container fullwidth\">\r\n            <img src=\"/logo.png\" alt=\"\" id=\"logo\" />\r\n          </div>\r\n          <div className=\"username-container fullwidth\">\r\n            <input\r\n              id=\"username\"\r\n              type=\"text\"\r\n              placeholder=\"Username\"\r\n              onChange={onChangeUsername}\r\n            />\r\n          </div>\r\n          <div className=\"password-container\">\r\n            <input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              onChange={onChangePassword}\r\n            />\r\n          </div>\r\n          <div id=\"error-message-l\" className=\"grid-center\"></div>\r\n          <div className=\"login-button-container fullwidth\">\r\n            <Link to=\"/home\">\r\n              <button id=\"login-button\" onClick={onLogin}>\r\n                LOGIN\r\n              </button>\r\n            </Link>\r\n          </div>\r\n          <div className=\"text-container\">\r\n            <Link to=\"/signup\">Don 't have an account?</Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}